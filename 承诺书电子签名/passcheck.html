<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0,maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" />
		<meta http-equiv="X-UA-Compatible" content="ie=edge" />
		<title>承诺书</title>
		<link rel="stylesheet" href="css/passcheck.css" />
		<link rel="stylesheet" href="css/font.css" />
		<script src="js/flexible.js"></script>
		<script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>
	</head>
	<body>
		<header>
			<img src="./img/back.png" alt="">
			<h1>通行证明</h1>
		</header>
		<div class="box">
			<div class="code">
				<img src="./img/redcode.png" alt="">
			</div>
			<h1>车辆通行证</h1>
			<div class="carinfo">
				<div class="driver">
					<span>姓名: 新冠病毒</span>
					<span>车牌号: 鲁000000 </span>
				</div>
				<div>电话: 11111111111</div>
				<div>身份证: 222222222222222222</div>
			</div>
		</div>
		<!-- 这里是新加的内容 -->
		<div id="savaCanvas" onclick="savaCanvas" class="save">
			保存
		</div>
		<canvas id="myCanvas" height="281" style="width: 100%;display: none;" ></canvas>
	</body>
	<script type="text/javascript">
		document.getElementById('savaCanvas').onclick = function(){
			var c = document.getElementById("myCanvas");
			var img = new Image()
			img.src = 'http://txz.kuaituo.com/user/driverQrImg?code=6eb70cb82d5e41d693d4173e4851538c'
			img.onload = function() {
				var ctx = c.getContext('2d');
				ctx.fillStyle = '#FAE1E1';
				ctx.fillRect(0, 0, 300, 281)
				ctx.drawImage(this, 240, 24, 42, 42);
				
				ctx.font = "bold 40px sans-serif";
				ctx.fillStyle = '#000000';
				ctx.textAlign = 'center'; //文本水平对齐方式
				ctx.fillText("车辆通行证", 150, 110);
				
				
				ctx.font = "16px sans-serif";
				ctx.fillStyle = '#000000';
				ctx.fillText("姓名：李明", 60, 150);
				
				ctx.font = "16px sans-serif";
				ctx.fillStyle = '#000000';
				ctx.fillText("车牌号：京A12365", 200, 150);
				
				ctx.font = "16px sans-serif";
				ctx.fillStyle = '#000000';
				ctx.fillText("电话：16363265987", 95, 180);
				
				ctx.font = "16px sans-serif";
				ctx.fillStyle = '#000000';
				ctx.fillText("身份证号：371322********5824", 135, 210);
			}
			var dataURL = c.toDataURL();
			console.log(dataURL);
		}
	</script>
</html>
